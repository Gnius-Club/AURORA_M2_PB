:root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  /* Spacing */
  --space-2: 2px;
  --space-4: 5px;
  --space-6: 7.5px;
  --space-8: 10px;
  --space-10: 12.5px;
  --space-12: 15px;
  --space-16: 20px;
  --space-20: 25px;
  --space-24: 30px;
  --space-32: 40px;

  /* Border Radius */
  --radius-sm: 7.5px;
  --radius-base: 10px;
  --radius-md: 12.5px;
  --radius-lg: 15px;
  --radius-full: 9999px;
  
  /* Animation */
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);
}

/* Base styles */
html {
  font-size: 17.5px; /* Increased from 14px (25% bigger) */
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  box-sizing: border-box;
}

body {
    font-family: 'Roboto', sans-serif; /* NEW FONT */
    background: #020a1a;
    color: #00ffff;
    overflow-x: hidden;
    min-height: 100vh;
    position: relative;
    margin: 0;
    padding: 0;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

/* Scanlines effect */
body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        transparent 0px,
        rgba(0, 255, 255, 0.03) 2px,
        transparent 4px
    );
    background-size: 100% 4px;
    pointer-events: none;
    z-index: 1000;
}

/* Animated stars background */
body::after {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 200%;
    height: 200%;
    background-image: 
        radial-gradient(circle at 25% 25%, rgba(0, 255, 255, 0.1) 1px, transparent 1px),
        radial-gradient(circle at 75% 50%, rgba(255, 255, 0, 0.1) 1px, transparent 1px),
        radial-gradient(circle at 50% 75%, rgba(0, 255, 0, 0.1) 1px, transparent 1px);
    background-size: 100px 100px, 150px 150px, 200px 200px;
    animation: starfield 20s linear infinite;
    pointer-events: none;
    z-index: -1;
}

@keyframes starfield {
    0% { transform: translate(0, 0); }
    100% { transform: translate(-50px, -50px); }
}

/* Typography for Game UI - Using VT323 */
h1, h2, h3, .btn, .command-block, .panel-title, .level-info, .mission-progress, .stopwatch, .legend-text, .order-title, .order-step {
    font-family: 'VT323', monospace;
    text-transform: uppercase;
    letter-spacing: 2px;
    text-shadow: 0 0 10px currentColor;
}
.modal-content p, .modal-content div { /* Tutorial text uses Roboto */
     font-family: 'Roboto', sans-serif;
     text-shadow: none;
     letter-spacing: normal;
     text-transform: none;
}
.modal-content h1, .modal-content h2, .modal-content h3 { /* Modal titles keep retro font */
    font-family: 'VT323', monospace;
    text-transform: uppercase;
    letter-spacing: 2px;
    text-shadow: 0 0 10px currentColor;
}


/* Game Container */
.game-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: var(--space-20);
    position: relative;
    z-index: 2;
}

/* Header */
.game-header {
    text-align: center;
    margin-bottom: var(--space-32);
    background: rgba(0, 255, 255, 0.05);
    border: 1px solid rgba(0, 255, 255, 0.3);
    border-radius: var(--radius-md);
    padding: var(--space-20);
    box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
}

.game-title {
    font-size: 3.125rem; /* Increased from 2.5rem */
    color: #00ffff;
    margin-bottom: var(--space-10);
    animation: glow 2s ease-in-out infinite alternate;
}

@keyframes glow {
    from { text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff; }
    to { text-shadow: 0 0 15px #00ffff, 0 0 30px #00ffff, 0 0 40px #00ffff; }
}

.mission-status {
    display: flex;
    flex-direction: column;
    gap: var(--space-12); /* Increased gap */
    align-items: center;
}

/* NEW: Stopwatch Style */
.stopwatch {
    font-size: 3.75rem; /* Large font size */
    color: #ff1f1f; /* Dangerous red */
    background-color: rgba(255, 0, 0, 0.1);
    border: 2px solid rgba(255, 40, 40, 0.7);
    border-radius: var(--radius-base);
    padding: var(--space-8) var(--space-20);
    margin: var(--space-12) auto;
    width: fit-content;
    box-shadow: 0 0 25px rgba(255, 0, 0, 0.5), inset 0 0 10px rgba(255, 0, 0, 0.3);
    animation: pulse-danger 1.5s infinite ease-in-out;
}

@keyframes pulse-danger {
    0% {
        transform: scale(1);
        text-shadow: 0 0 10px #ff1f1f, 0 0 20px #ff1f1f;
    }
    50% {
        transform: scale(1.02);
        text-shadow: 0 0 20px #ff4f4f, 0 0 35px #ff4f4f;
    }
    100% {
        transform: scale(1);
        text-shadow: 0 0 10px #ff1f1f, 0 0 20px #ff1f1f;
    }
}


.level-info {
    font-size: 1.75rem; /* Increased from 1.4rem */
    color: #00ff00;
    background: rgba(0, 255, 0, 0.1);
    padding: var(--space-6) var(--space-16);
    border: 1px solid rgba(0, 255, 0, 0.3);
    border-radius: var(--radius-full);
}

.mission-progress {
    font-size: 1.375rem; /* Increased from 1.1rem */
    color: #ffff00;
}

/* Main Game Layout */
.game-main {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-32);
    margin-bottom: var(--space-20);
}

/* Panels */
.simulator-panel,
.command-panel {
    background: rgba(0, 255, 255, 0.05);
    border: 2px solid rgba(0, 255, 255, 0.3);
    border-radius: var(--radius-lg);
    padding: var(--space-24);
    box-shadow: 
        0 0 30px rgba(0, 255, 255, 0.1),
        inset 0 0 30px rgba(0, 255, 255, 0.05);
}

.panel-title {
    font-size: 2.25rem; /* Increased from 1.8rem */
    color: #ff8800;
    margin-bottom: var(--space-20);
    text-align: center;
    border-bottom: 1px solid rgba(255, 136, 0, 0.3);
    padding-bottom: var(--space-10);
}

/* Mars Grid */
.mars-grid {
    display: grid;
    gap: 2px;
    aspect-ratio: 1;
    max-width: 450px;
    margin: 0 auto var(--space-20) auto;
    border: 2px solid #ff8800;
    border-radius: var(--radius-md);
    overflow: hidden;
    box-shadow: 0 0 20px rgba(255, 136, 0, 0.3);
}

.mars-grid.grid-6x6 { grid-template-columns: repeat(6, 1fr); }
.mars-grid.grid-7x7 { grid-template-columns: repeat(7, 1fr); }
.mars-grid.grid-8x8 { grid-template-columns: repeat(8, 1fr); }

.grid-cell {
    background: rgba(255, 136, 0, 0.1);
    border: 1px solid rgba(255, 136, 0, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.25rem; /* Increased from 1.8rem */
    position: relative;
    transition: all 0.3s ease;
    min-height: 45px;
}

.grid-cell.rover { background: rgba(0, 255, 0, 0.3); box-shadow: 0 0 15px rgba(0, 255, 0, 0.5); animation: roverPulse 2s infinite; }
@keyframes roverPulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
.grid-cell.obstacle { background: rgba(255, 0, 0, 0.3); box-shadow: 0 0 15px rgba(255, 0, 0, 0.5); }
.grid-cell.target { background: rgba(255, 221, 0, 0.3); box-shadow: 0 0 15px rgba(255, 221, 0, 0.5); }
.grid-cell .pulse { animation: targetPulse 1.5s infinite; }
@keyframes targetPulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.2); opacity: 0.8; } }

/* Simulator Legend */
.simulator-legend {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-12);
    margin-top: var(--space-16);
}
.legend-item { display: flex; align-items: center; gap: var(--space-8); font-size: 1.375rem; } /* Increased from 1.1rem */
.legend-icon { font-size: 1.875rem; } /* Increased from 1.5rem */

/* Command Blocks */
.command-box { margin-bottom: var(--space-32); }
.command-title { font-size: 1.875rem; color: #ffff00; margin-bottom: var(--space-16); text-align: center; } /* Increased from 1.5rem */
.command-blocks { display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-16); }

.command-block {
    background: linear-gradient(135deg, rgba(0, 255, 0, 0.2), rgba(0, 255, 0, 0.1));
    border: 2px solid rgba(0, 255, 0, 0.5);
    border-radius: var(--radius-md);
    padding: var(--space-16);
    text-align: center;
    cursor: grab;
    transition: all var(--duration-normal) var(--ease-standard);
    font-size: 1.375rem; /* Increased from 1.1rem */
    user-select: none;
    position: relative;
    overflow: hidden;
}

.command-block:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(0, 255, 0, 0.4); border-color: rgba(0, 255, 0, 0.8); }
.command-block:active { cursor: grabbing; transform: scale(0.95); }

.command-block.blue { background: linear-gradient(135deg, rgba(0, 136, 255, 0.2), rgba(0, 136, 255, 0.1)); border-color: rgba(0, 136, 255, 0.5); }
.command-block.blue:hover { box-shadow: 0 10px 25px rgba(0, 136, 255, 0.4); border-color: rgba(0, 136, 255, 0.8); }
.command-block.yellow { background: linear-gradient(135deg, rgba(255, 255, 0, 0.2), rgba(255, 255, 0, 0.1)); border-color: rgba(255, 255, 0, 0.5); }
.command-block.yellow:hover { box-shadow: 0 10px 25px rgba(255, 255, 0, 0.4); border-color: rgba(255, 255, 0, 0.8); }
.command-block.orange { background: linear-gradient(135deg, rgba(255, 136, 0, 0.2), rgba(255, 136, 0, 0.1)); border-color: rgba(255, 136, 0, 0.5); }
.command-block.orange:hover { box-shadow: 0 10px 25px rgba(255, 136, 0, 0.4); border-color: rgba(255, 136, 0, 0.8); }

.command-icon { font-size: 2.5rem; display: block; margin-bottom: var(--space-8); } /* Increased from 2rem */

/* Sequence Area */
.sequence-title { font-size: 1.875rem; color: #00ffff; margin-bottom: var(--space-16); text-align: center; } /* Increased from 1.5rem */
.sequence-info { margin-bottom: var(--space-20); padding: var(--space-12); background: rgba(0, 255, 255, 0.1); border: 1px solid rgba(0, 255, 255, 0.3); border-radius: var(--radius-base); }
.order-title { display: block; font-size: 1.375rem; color: #ffff00; margin-bottom: var(--space-8); text-align: center; } /* Increased from 1.1rem */
.order-sequence { display: flex; align-items: center; justify-content: center; gap: var(--space-8); flex-wrap: wrap; }
.order-step { padding: var(--space-4) var(--space-8); background: rgba(0, 0, 0, 0.3); border-radius: var(--radius-sm); font-size: 1.125rem; transition: all var(--duration-normal) ease; } /* Increased from 0.9rem */
.order-step.completed { background: rgba(0, 255, 0, 0.3); color: #00ff00; box-shadow: 0 0 10px rgba(0, 255, 0, 0.5); }
.order-step.current { background: rgba(255, 255, 0, 0.3); color: #ffff00; box-shadow: 0 0 10px rgba(255, 255, 0, 0.5); animation: currentStepPulse 1s infinite; }
@keyframes currentStepPulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
.order-arrow { color: rgba(255, 255, 255, 0.5); font-size: 1.5rem; } /* Increased from 1.2rem */

/* Sequence Slots */
.sequence-slots { display: grid; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap: var(--space-8); margin-bottom: var(--space-20); max-height: 400px; overflow-y: auto; padding: var(--space-8); border: 1px solid rgba(0, 255, 255, 0.2); border-radius: var(--radius-base); }
.sequence-slot { width: 80px; height: 80px; border: 2px dashed rgba(0, 255, 255, 0.5); border-radius: var(--radius-base); display: flex; align-items: center; justify-content: center; font-size: 1rem; color: rgba(0, 255, 255, 0.7); background: rgba(0, 255, 255, 0.05); transition: all var(--duration-normal) var(--ease-standard); }
.sequence-slot.drag-over { border-color: rgba(0, 255, 255, 1); background: rgba(0, 255, 255, 0.1); transform: scale(1.05); }
.sequence-slot .command-block { width: 100%; height: 100%; margin: 0; padding: var(--space-4); font-size: 1.1rem; }
.sequence-slot .command-icon { font-size: 1.625rem; margin-bottom: var(--space-2); } /* Increased from 1.3rem */
.sequence-slot.executing { animation: executeHighlight 0.5s ease; }
@keyframes executeHighlight { 0%, 100% { box-shadow: 0 0 20px rgba(255, 255, 0, 0.8); } 50% { box-shadow: 0 0 30px rgba(255, 255, 0, 1); } }
.sequence-actions { display: flex; gap: var(--space-16); justify-content: center; }

/* Buttons */
.btn { background: linear-gradient(135deg, rgba(0, 255, 255, 0.2), rgba(0, 255, 255, 0.1)); border: 2px solid rgba(0, 255, 255, 0.5); color: #00ffff; padding: var(--space-12) var(--space-20); border-radius: var(--radius-base); font-size: 1.375rem; cursor: pointer; transition: all var(--duration-normal) var(--ease-standard); letter-spacing: 1px; position: relative; overflow: hidden; } /* Increased from 1.1rem */
.btn::before { content: ""; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent); transition: left 0.5s ease; }
.btn:hover::before { left: 100%; }
.btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0, 255, 255, 0.4); border-color: rgba(0, 255, 255, 0.8); }
.btn--primary { background: linear-gradient(135deg, rgba(0, 255, 0, 0.3), rgba(0, 255, 0, 0.2)); border-color: rgba(0, 255, 0, 0.6); color: #00ff00; }
.btn--primary:hover { box-shadow: 0 8px 20px rgba(0, 255, 0, 0.4); border-color: rgba(0, 255, 0, 0.8); }
.btn--outline { background: transparent; border-color: rgba(255, 136, 0, 0.6); color: #ff8800; }
.btn--outline:hover { background: rgba(255, 136, 0, 0.1); box-shadow: 0 8px 20px rgba(255, 136, 0, 0.4); border-color: rgba(255, 136, 0, 0.8); }
.btn--large { padding: var(--space-16) var(--space-32); font-size: 1.625rem; border-radius: var(--radius-md); } /* Increased from 1.3rem */
.btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; box-shadow: none; }

/* Footer */
.game-footer { text-align: center; margin-top: var(--space-20); padding: var(--space-16); background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(0, 255, 255, 0.2); border-radius: var(--radius-base); }
.status-info { font-size: 1.375rem; color: #00ffff; } /* Increased from 1.1rem */

/* Modal Styles */
.modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); display: flex; align-items: center; justify-content: center; z-index: 2000; backdrop-filter: blur(5px); }
.modal.hidden { display: none; }
.modal-content { background: linear-gradient(135deg, rgba(2, 10, 26, 0.95), rgba(0, 20, 40, 0.95)); border: 2px solid rgba(0, 255, 255, 0.5); border-radius: var(--radius-lg); padding: var(--space-32); max-width: 700px; max-height: 80vh; overflow-y: auto; box-shadow: 0 0 40px rgba(0, 255, 255, 0.3); animation: modalAppear 0.5s ease; }
@keyframes modalAppear { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

/* Tutorial Styles */
.tutorial-header { text-align: center; margin-bottom: var(--space-24); border-bottom: 1px solid rgba(0, 255, 255, 0.3); padding-bottom: var(--space-16); }
.tutorial-progress { font-size: 1.375rem; color: #ffff00; margin-top: var(--space-10); } /* Increased from 1.1rem */
.tutorial-message { font-size: 1.625rem; line-height: 1.6; text-align: center; margin: var(--space-24) 0; color: #ffffff; } /* Increased from 1.3rem */
.tutorial-footer { display: flex; justify-content: space-between; margin-top: var(--space-24); gap: var(--space-16); }

/* Victory Styles */
.victory-content, .final-victory-content { text-align: center; }
.victory-header h2 { font-size: 3.125rem; color: #00ff00; margin-bottom: var(--space-20); animation: victoryGlow 1s ease-in-out infinite alternate; } /* Increased from 2.5rem */
@keyframes victoryGlow { from { text-shadow: 0 0 20px #00ff00; } to { text-shadow: 0 0 30px #00ff00, 0 0 40px #00ff00; } }
.victory-message { font-size: 1.625rem; line-height: 1.6; margin: var(--space-20) 0; color: #ffffff; } /* Increased from 1.3rem */
.victory-rover { font-size: 5rem; margin: var(--space-20) 0; animation: victoryDance 1s ease-in-out infinite; } /* Increased from 4rem */
@keyframes victoryDance { 0%, 100% { transform: rotate(0deg) scale(1); } 25% { transform: rotate(-10deg) scale(1.1); } 75% { transform: rotate(10deg) scale(1.1); } }
.objectives-collected { display: flex; flex-direction: column; gap: var(--space-8); margin: var(--space-20) 0; }
.objective-item { font-size: 1.5rem; color: #00ff00; background: rgba(0, 255, 0, 0.1); padding: var(--space-8) var(--space-16); border-radius: var(--radius-base); border: 1px solid rgba(0, 255, 0, 0.3); } /* Increased from 1.2rem */

/* Final Victory Styles */
.final-victory-title { font-size: 3.75rem; color: #00ffff; margin-bottom: var(--space-16); animation: finalVictoryGlow 1.5s ease-in-out infinite alternate; } /* Increased from 3rem */
@keyframes finalVictoryGlow { from { text-shadow: 0 0 20px #00ffff; color: #00ffff; } to { text-shadow: 0 0 30px #00ff00, 0 0 50px #ffff00; color: #00ff00; } }
.master-navigator { font-size: 2.5rem; color: #ffff00; margin-bottom: var(--space-24); text-shadow: 0 0 20px #ffff00; } /* Increased from 2rem */
.celebration-rover { font-size: 7.5rem; margin: var(--space-24) 0; animation: celebrationDance 0.8s ease-in-out infinite; } /* Increased from 6rem */
@keyframes celebrationDance { 0%, 100% { transform: rotate(0deg) scale(1); } 25% { transform: rotate(-15deg) scale(1.2); } 50% { transform: rotate(0deg) scale(1.1); } 75% { transform: rotate(15deg) scale(1.2); } }
.fireworks { position: relative; height: 100px; margin: var(--space-20) 0; }
.firework { position: absolute; width: 4px; height: 4px; border-radius: 50%; animation: fireworkExplosion 2s ease-out infinite; }
.firework:nth-child(1) { left: 20%; animation-delay: 0s; background: #ff0080; box-shadow: 0 0 10px #ff0080; }
.firework:nth-child(2) { left: 50%; animation-delay: 0.5s; background: #00ff80; box-shadow: 0 0 10px #00ff80; }
.firework:nth-child(3) { left: 80%; animation-delay: 1s; background: #8000ff; box-shadow: 0 0 10px #8000ff; }
@keyframes fireworkExplosion { 0% { transform: translateY(50px) scale(0); opacity: 1; } 15% { transform: translateY(20px) scale(1); opacity: 1; } 100% { transform: translateY(-50px) scale(0); opacity: 0; box-shadow: 0 0 20px currentColor, 10px 10px 20px currentColor, -10px 10px 20px currentColor, 10px -10px 20px currentColor, -10px -10px 20px currentColor; } }
.victory-stats { display: flex; flex-direction: column; gap: var(--space-12); margin: var(--space-24) 0; }
.stat-item { font-size: 1.625rem; color: #00ff00; background: rgba(0, 255, 0, 0.1); padding: var(--space-10) var(--space-20); border-radius: var(--radius-base); border: 1px solid rgba(0, 255, 0, 0.3); animation: statGlow 2s ease-in-out infinite alternate; } /* Increased from 1.3rem */
@keyframes statGlow { from { box-shadow: 0 0 10px rgba(0, 255, 0, 0.3); } to { box-shadow: 0 0 20px rgba(0, 255, 0, 0.6); } }

/* Rover crash animation */
.grid-cell.rover.crashed { animation: crashShake 0.5s ease-in-out; }
@keyframes crashShake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

/* Responsive Design */
@media (max-width: 768px) {
    .game-main { grid-template-columns: 1fr; gap: var(--space-20); }
    .game-title { font-size: 2.5rem; }
    .mission-status { flex-direction: column; gap: var(--space-6); }
    .command-blocks { grid-template-columns: repeat(2, 1fr); gap: var(--space-10); }
    .sequence-slots { grid-template-columns: repeat(auto-fit, minmax(60px, 1fr)); gap: var(--space-6); }
    .sequence-slot { width: 60px; height: 60px; }
    .modal-content { margin: var(--space-20); max-width: calc(100vw - 40px); }
    .tutorial-footer { flex-direction: column; }
    .order-sequence { flex-direction: column; gap: var(--space-4); }
    .order-arrow { transform: rotate(90deg); }
    .simulator-legend { grid-template-columns: 1fr; gap: var(--space-8); }
}

@media (max-width: 480px) {
    .game-container { padding: var(--space-10); }
    .simulator-panel, .command-panel { padding: var(--space-16); }
    .command-blocks { grid-template-columns: 1fr; gap: var(--space-12); }
    .sequence-slot { width: 50px; height: 50px; }
    .btn { font-size: 1.25rem; padding: var(--space-10) var(--space-16); }
    .btn--large { font-size: 1.375rem; padding: var(--space-12) var(--space-20); }
    .final-victory-title { font-size: 2.5rem; }
    .celebration-rover { font-size: 5rem; }
}
